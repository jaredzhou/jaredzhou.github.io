<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<title>MapReduce | Jared's Site</title>
<meta property="og:title" content="MapReduce - Jared's Site">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-09-25T00:00:00+08:00">
<meta property="article:modified_time" content="2021-09-25T00:00:00+08:00">
<meta name=Keywords content>
<meta name=description content="MapReduce">
<meta name=author content>
<meta property="og:url" content="https://jaredzhou.github.io/posts/mapreduce/">
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<link rel=stylesheet href=/css/normalize.css>
<link rel=stylesheet href=/css/style.css>
<script type=text/javascript src=//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js></script>
</head>
<body>
<header id=header class=clearfix>
<div class=container>
<div class=col-group>
<div class=site-name>
<a id=logo href=https://jaredzhou.github.io/>
Jared's Site
</a>
</div>
<div>
<nav id=nav-menu class=clearfix>
<a href=https://jaredzhou.github.io/>首页</a>
</nav>
</div>
</div>
</div>
</header>
<div id=body>
<div class=container>
<div class=col-group>
<div class=col-8 id=main>
<div class=res-cons>
<article class=post>
<header>
<h1 class=post-title>MapReduce</h1>
</header>
<date class="post-meta meta-date">
2021年9月25日
</date>
<div class=post-content>
<h1 id=系统描述>系统描述</h1>
<p>根据Google论文mapreduce开发一个简易的mapreduce系统，可以处理多个数据文件，最后生成一个结果，课程案例主要是对文本进行WordCount，首先通过map统计每个word出现的次数，然后通过reduce计算count</p>
<h2 id=设计>设计</h2>
<ul>
<li>Coordinator 协调者负责分配任务，包括map任务，reduce任务。</li>
<li>Worker 执行map， reduce任务， 任务通过rpc请求Cooridnator获取</li>
<li>Coordinator要包含错误处理，错误包括任务失败与任务缓慢，处理措施都是重试</li>
</ul>
<h2 id=实现>实现</h2>
<ul>
<li>Coordinator包含两个任务队列,一个mapTasks，由输入文件数决定； 一个reduceTasks,由reduce数量决定</li>
<li>当worker请求任务时， Coordinator会分配一个Ready状态的任务，任务一旦分配就设置成Pending状态。</li>
<li>Worker完成任务后，通知Coorinator，此Task已完成, 等待1秒后继续请求下一个任务</li>
<li>当所有reduceTask都完成后， 整个任务完成</li>
</ul>
<h2 id=错误处理>错误处理</h2>
<ul>
<li>当一个任务pending超过10秒后，如果状态不为Finish， 则重新设置成Ready</li>
<li>Worker执行任务失败后，直接结束当前循环，等待下一个任务请求</li>
<li>任务执行成功后， Coordinator会对请求任务的worker返回Done标记， worker接收标记后退出；如果Coordinator已经退出， 则网络连接失败， Worker退出；其他情况Worker会一直循环请求任务</li>
<li>Worker会使用TempFile作为中间输出，当前任务完成后，Rename这些文件到正确的文件目录，所以当Worker执行失败时这些文件并不可见</li>
</ul>
<h2 id=流程图>流程图</h2>
<p>
<img class=mx-auto alt src=mapreduce/arch.png>
</p>
</div>
<div class="post-meta meta-tags">
没有标签
</div>
</article>
</div>
<footer id=footer>
<div>
&copy; 2021 <a href=https://jaredzhou.github.io/>Jared's Site By </a>
</div>
<br>
<div>
<div class=github-badge>
<a href=https://gohugo.io/ target=_black rel=nofollow><span class=badge-subject>Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
</div>
<div class=github-badge>
<a href=https://www.flysnow.org/ target=_black><span class=badge-subject>Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
</div>
<div class=github-badge>
<a href=https://github.com/flysnow-org/maupassant-hugo target=_black><span class=badge-subject>Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
</div>
</div>
</footer>
<script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[['$','$']],processEscapes:!0}}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<a id=rocket href=#top></a>
<script type=text/javascript src="/js/totop.js?v=0.0.0" async></script>
</div>
<div id=secondary>
<section class=widget>
<form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1>
<input type=text name=q maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=https://jaredzhou.github.io/>
<button type=submit class="submit icon-search"></button>
</form>
</section>
<section class=widget>
<h3 class=widget-title>最近文章</h3>
<ul class=widget-list>
<li>
<a href=https://jaredzhou.github.io/posts/mapreduce/ title=MapReduce>MapReduce</a>
</li>
<li>
<a href=https://jaredzhou.github.io/posts/my-first-post/ title="My First Post">My First Post</a>
</li>
<li>
<a href=https://jaredzhou.github.io/posts/workflow/ title=任务流>任务流</a>
</li>
</ul>
</section>
<section class=widget>
<h3 class=widget-title><a href=/categories/>分类</a></h3>
<ul class=widget-list>
</ul>
</section>
<section class=widget>
<h3 class=widget-title><a href=/tags/>标签</a></h3>
<div class=tagcloud>
</div>
</section>
<section class=widget>
<h3 class=widget-title>其它</h3>
<ul class=widget-list>
<li><a href=https://jaredzhou.github.io/index.xml>文章 RSS</a></li>
</ul>
</section>
</div>
</div>
</div>
</div>
</body>
</html>